
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- common.css -->
      <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: -apple-system, Helvetica, Arial, sans-serif;margin: 0;padding: 20px;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;height: auto;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 90%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
      <!-- ace-static.css -->
      <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter > .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
      <style>.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}</style>
      <!-- export.css -->
      <style>
        body{margin:0 auto;max-width:800px;line-height:1.4}
        #nav{margin:5px 0 10px;font-size:15px}
        #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
        #contentarea{font-size:15px;margin:16px 0}
        .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
        .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
        .latex-cell{white-space:pre-wrap;}
      </style>
      <!-- User CSS -->
      <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
    </head>
    <body>
      <div id="nav"><div>Next: <a href='一、认识HTML5.html'>一、认识HTML5</a>, Previous: <a href='五、认识canvas.html'>五、认识canvas</a>, Up: <a href='index.html'>Index</a></div></div>
      <div id="titlearea">
        <h2>四、HTML5文件操作API</h2>
      </div>
      <div id="contentarea"><div class="cell text-cell"><h2 id="-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; padding-bottom: 0.3em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(234, 236, 239); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">一、实验介绍</h2><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">在之前我们操作本地文件都是使用flash、silverlight或者第三方的activeX插件等技术，由于使用了这些技术后就很难进行跨平台、或者跨浏览器、跨设备等情况下实现统一的表现，从另外一个角度来说就是让我们的web应用依赖了第三方的插件，而不是很独立。 在HTML5标准中，默认提供了操作文件的API让这一切直接标准化。有了操作文件的API，让我们的Web应用可以很轻松的通过JS来控制文件的读取、写入、文件夹、文件等一系列的操作。接下来主要给大家介绍文件读取的几个API。</p><h2 id="-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; padding-bottom: 0.3em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(234, 236, 239); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">二、实验步骤</h2><h3 id="2-1-js-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">2.1几个重要的JS对象</h3><h4 id="2-1-1-filelist-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">2.1.1 FileList对象</h4><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">它是File对象的一个集合，在HTML4标准中文件上传控件只接受一个文件，而在新标准中，只需要设置<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">multiple</code>，就支持多文件上传，所以从此标签中获取的<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">files</code>属性就是<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">FileList</code>对象实例。 demo：<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">&lt;input type="file" multiple="multiple" name="fileDemo" id="fileDemo" /&gt;</code>; 下面是关于<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">FileList</code>对象的API的原型：</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs " style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">interface FileList {
      <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">getter</span> File? item(<span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">unsigned</span> <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">long</span> index);
      <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">readonly</span> attribute <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">unsigned</span> <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">long</span> length;
};
</code></pre><h4 id="2-1-2-blob-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">2.1.2 Blob对象</h4><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">其实就是一个原始数据对象，它提供了<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">slice</code>方法可以读取原始数据中的某块数据。另外有两个属性：<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">size</code>（数据的大小），<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">type</code>（数据的MIME类型; 看下面的是W3C的API原型:</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs " style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">interface</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">Blob</span> {
    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">readonly</span> attribute unsigned <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">long</span> <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">long</span> size;
    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">readonly</span> attribute DOMString type;
    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(117, 113, 94);">//slice Blob into byte-ranged chunks     </span>
    <span class="hljs-function" style="box-sizing: border-box;">Blob <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">slice</span>(<span class="hljs-params" style="box-sizing: border-box;">
        optional <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">long</span> <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">long</span> start,
        optional <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">long</span> <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">long</span> end,
        optional DOMString contentType
    </span>)</span>; 
};
</code></pre><h4 id="2-1-3-file-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">2.1.3 File对象</h4><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">继承自Blob对象，指向一个具体的文件，它还有两个属性：<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">name</code>（文件名）,<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">lastModifiedDate</code>（最后修改时间）; W3C的标准：</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs " style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">interface</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">File</span> : <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">Blob</span> {
    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">readonly</span> attribute DOMString name;
    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">readonly</span> attribute Date lastModifiedDate;
};
</code></pre><h4 id="2-1-4-filereader-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">2.1.4 FileReader对象</h4><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">设计用来读取文件里面的数据，提供三个常用的读取文件数据的方法，另外读取文件数据使用了异步的方式，非常高效。 W3C的标准：</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs " style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">[<span class="hljs-meta" style="box-sizing: border-box; color: rgb(117, 113, 94);">Constructor</span>]
<span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">interface</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">FileReader</span>: <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">EventTarget</span> {
    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(117, 113, 94);">// async read methods</span>
    <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">void</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">readAsArrayBuffer</span>(<span class="hljs-params" style="box-sizing: border-box;">Blob blob</span>)</span>;
    <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">void</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">readAsBinaryString</span>(<span class="hljs-params" style="box-sizing: border-box;">Blob blob</span>)</span>;
    <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">void</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">readAsText</span>(<span class="hljs-params" style="box-sizing: border-box;">Blob blob, optional DOMString encoding</span>)</span>;
    <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">void</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">readAsDataURL</span>(<span class="hljs-params" style="box-sizing: border-box;">Blob blob</span>)</span>;

    <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">void</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">abort</span>(<span class="hljs-params" style="box-sizing: border-box;"></span>)</span>;

    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(117, 113, 94);">// states  </span>
    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">const</span> unsigned <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">short</span> EMPTY = <span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">0</span>;
    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">const</span> unsigned <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">short</span> LOADING = <span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">1</span>;
    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">const</span> unsigned <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">short</span> DONE = <span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2</span>;

    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">readonly</span> attribute unsigned <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">short</span> readyState;

    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(117, 113, 94);">// File or Blob data</span>
    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">readonly</span> attribute any result;
    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">readonly</span> attribute DOMError error;

    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(117, 113, 94);">// event handler attributes</span>
    attribute [TreatNonCallableAsNull] Function? onloadstart;
    attribute [TreatNonCallableAsNull] Function? onprogress;
    attribute [TreatNonCallableAsNull] Function? onload;
    attribute [TreatNonCallableAsNull] Function? onabort;
    attribute [TreatNonCallableAsNull] Function? onerror;
    attribute [TreatNonCallableAsNull] Function? onloadend;
};
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">这个对象是非常重要的一个对象，它提供了四个读取文件数据的方法，这些方法都是异步的方式读取数据，读取成功后就直接将结果放到属性<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">result</code>中。所以一般就是直接读取数据，然后监听此对象的<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">onload</code>事件，然后在事件里面读取<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">result</code>属性，再做后续处理。当然<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">abort</code>就是停止读取的方法。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);"><span style="box-sizing: border-box; font-weight: 600;">FileReader对象的三个读取文件数据方法</span></p><ul style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);"><li style="box-sizing: border-box;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">readAsBinaryString(Blob blob)</code>&nbsp;传入一个Blob对象，然后读取数据的结果作为二进制字符串的形式放到FileReader的result属性中。</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">readAsText(Blob blob, optional DOMString encoding)</code>&nbsp;第一个参数传入Blob对象，然后第二个参数传入编码格式，异步将数据读取成功后放到result属性中，读取的内容是普通的文本字符串的形式。</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">readAsDataURL(Blob blob)</code>&nbsp;传入一个Blob对象，读取内容可以做为URL属性，也就是说可以将一个图片的结果指向给一个img的src属性。</li></ul><h3 id="2-2-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">2.2 读取文件上传控件里的文件并将内容已不同的方式展现到浏览器</h3><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">在展示代码之前，之前我们操作一个图片文件，都是先将图片上传到服务器端，然后再使用一个<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">img</code>标签指向到服务器的<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">url</code>地址，然后再进行一个使用第三方插件进行图片处理，而现在这一切都不需要服务器端了，因为<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">FileReader</code>对象提供的几个读取文件的方法变得异常简单，而且全部是客户端js的操作。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">实例一：获取上传文件的文件名（注：需要引入jQuery）</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs " style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;"><span class="hljs-meta" style="box-sizing: border-box; color: rgb(117, 113, 94);">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">html</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">xmlns</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"http://www.w3.org/1999/xhtml"</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">head</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">title</span>&gt;</span><span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">title</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">script</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">src</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"Scripts/jquery-1.5.1.js"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">type</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"text/javascript"</span>&gt;</span><span class="undefined" style="box-sizing: border-box;"></span><span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">script</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">script</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">type</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"text/javascript"</span>&gt;</span><span class="javascript" style="box-sizing: border-box;">
        $(<span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">function</span> (<span class="hljs-params" style="box-sizing: border-box;"></span>) </span>{
            $(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"#btnGetFile"</span>).click(<span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">function</span> (<span class="hljs-params" style="box-sizing: border-box;">e</span>) </span>{
                <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">var</span> fileList = <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(230, 219, 116);">document</span>.getElementById(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"fileDemo"</span>).files;
                <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">for</span> (<span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">var</span> i = <span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">0</span>; i &lt; fileList.length; i++) {
                    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">if</span> (!(<span class="hljs-regexp" style="box-sizing: border-box; color: rgb(174, 129, 255);">/image\/\w+/</span>.test(fileList[i].type))) {
                         $(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"#result"</span>).append(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"&lt;span&gt;type:"</span>+fileList[i].type+<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"--******非图片类型*****--name:"</span>+fileList[i].name+<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"--size:"</span>+fileList[i].size+<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"&lt;/span&gt;&lt;br /&gt;"</span>);
                    }
                    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">else</span> {
                        $(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"#result"</span>).append(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"&lt;span&gt;type:"</span>+fileList[i].type+<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"--name:"</span>+fileList[i].name+<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"--size:"</span>+fileList[i].size+<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"&lt;/span&gt;&lt;br /&gt;"</span>);
                    }
                }
            });
        });
    </span><span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">script</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">head</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">body</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">form</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">action</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"/home/index"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">method</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"POST"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">novalidate</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"true"</span>&gt;</span>
        <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">input</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">type</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"file"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">multiple</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"multiple"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">name</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"fileDemo"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">id</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"fileDemo"</span> /&gt;</span><span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">br</span>/&gt;</span>
        <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">input</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">type</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"button"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">value</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"获取文件的名字"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">id</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"btnGetFile"</span>/&gt;</span>
        <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">div</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">id</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"result"</span>&gt;</span><span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">div</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">form</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">hr</span>/&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">body</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">html</span>&gt;</span>
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">实例二：读取上传文件内容，然后将文件内容直接读取到浏览器上（注：需要引入jQuery）</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs " style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;"><span class="hljs-meta" style="box-sizing: border-box; color: rgb(117, 113, 94);">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">html</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">xmlns</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"http://www.w3.org/1999/xhtml"</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">head</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">title</span>&gt;</span><span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">title</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">script</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">src</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"Scripts/jquery-1.5.1.js"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">type</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"text/javascript"</span>&gt;</span><span class="undefined" style="box-sizing: border-box;"></span><span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">script</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">script</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">type</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"text/javascript"</span>&gt;</span><span class="javascript" style="box-sizing: border-box;">
        <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">if</span>(<span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">typeof</span> FileReader == <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"undified"</span>) {
            alert(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"您老的浏览器不行了！"</span>);
        }

        <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">function</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">showDataByURL</span>(<span class="hljs-params" style="box-sizing: border-box;"></span>) </span>{
            <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">var</span> resultFile = <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(230, 219, 116);">document</span>.getElementById(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"fileDemo"</span>).files[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">0</span>];
            <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">if</span> (resultFile) {
                <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">var</span> reader = <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">new</span> FileReader();
                reader.readAsDataURL(resultFile);
                reader.onload = <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">function</span> (<span class="hljs-params" style="box-sizing: border-box;">e</span>) </span>{
                    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">var</span> urlData = <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">this</span>.result;
                    <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(230, 219, 116);">document</span>.getElementById(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"result"</span>).innerHTML += <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"&lt;img src='"</span> + urlData + <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"' alt='"</span> + resultFile.name + <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"' /&gt;"</span>;
                }; 
            }
        } 

        <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">function</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">showDataByBinaryString</span>(<span class="hljs-params" style="box-sizing: border-box;"></span>) </span>{
            <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">var</span> resultFile = <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(230, 219, 116);">document</span>.getElementById(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"fileDemo"</span>).files[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">0</span>];
            <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">if</span> (resultFile) {
                <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">var</span> reader = <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">new</span> FileReader();
                <span class="hljs-comment" style="box-sizing: border-box; color: rgb(117, 113, 94);">//异步方式，不会影响主线程</span>
                reader.readAsBinaryString(resultFile);
                reader.onload = <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">function</span>(<span class="hljs-params" style="box-sizing: border-box;">e</span>) </span>{
                    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">var</span> urlData = <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">this</span>.result;
                    <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(230, 219, 116);">document</span>.getElementById(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"result"</span>).innerHTML += urlData;
                };
            }
        }

        <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">function</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(166, 226, 46);">showDataByText</span>(<span class="hljs-params" style="box-sizing: border-box;"></span>) </span>{
            <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">var</span> resultFile = <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(230, 219, 116);">document</span>.getElementById(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"fileDemo"</span>).files[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">0</span>];
            <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">if</span> (resultFile) {
                <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">var</span> reader = <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">new</span> FileReader();
                reader.readAsText(resultFile,<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'gb2312'</span>);
                reader.onload = <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">function</span> (<span class="hljs-params" style="box-sizing: border-box;">e</span>) </span>{
                    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">var</span> urlData = <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(249, 38, 114);">this</span>.result;
                    <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(230, 219, 116);">document</span>.getElementById(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"result"</span>).innerHTML += urlData;
                };
            }
        }

    </span><span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">script</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">head</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">body</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">input</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">type</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"file"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">name</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"fileDemo"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">id</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"fileDemo"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">multep</span>/&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">input</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">type</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"button"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">value</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"readAsDataURL"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">id</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"readAsDataURL"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">onclick</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"showDataByURL();"</span>/&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">input</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">type</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"button"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">value</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"readAsBinaryString"</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">id</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"readAsBinaryString"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">onclick</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"showDataByBinaryString();"</span>/&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">input</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">type</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"button"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">value</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"readAsText"</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">id</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"readAsText"</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">onclick</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"showDataByText();"</span>/&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">div</span> <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 38, 114);">id</span>=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"result"</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">div</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">body</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box;">&lt;/<span class="hljs-name" style="box-sizing: border-box; color: rgb(249, 38, 114);">html</span>&gt;</span>
</code></pre><h2 id="-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; padding-bottom: 0.3em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(234, 236, 239); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">三、实验总结</h2><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">有了文件操作的API后，让JS进一步的操作本地文件的得到空前的加强，HTML5对于客户端Web应用得到进一步功能的提升，HTML5的趋势让Web更加富客户端化，而这些都需要让我们的HTML或者JS变得更加强大，而HTML5正是适时地推出了File API。</p></div></div>
      <script>document.body.onkeyup = function(e) {
if (e.keyCode === 39) window.location.href = '一、认识HTML5.html';
if (e.keyCode === 37) window.location.href = '五、认识canvas.html';
}</script>
    </body>
    </html>
  