
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- common.css -->
      <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: -apple-system, Helvetica, Arial, sans-serif;margin: 0;padding: 20px;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;height: auto;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 90%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
      <!-- ace-static.css -->
      <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter > .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
      <style>.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}</style>
      <!-- export.css -->
      <style>
        body{margin:0 auto;max-width:800px;line-height:1.4}
        #nav{margin:5px 0 10px;font-size:15px}
        #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
        #contentarea{font-size:15px;margin:16px 0}
        .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
        .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
        .latex-cell{white-space:pre-wrap;}
      </style>
      <!-- User CSS -->
      <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
    </head>
    <body>
      <div id="nav"><div>Next: <a href='十、分类预测挑战（挑战）.html'>十、分类预测挑战（挑战）</a>, Previous: <a href='十二、时间序列分析挑战（挑战）.html'>十二、时间序列分析挑战（挑战）</a>, Up: <a href='index.html'>Index</a></div></div>
      <div id="titlearea">
        <h2>十一、时间序列分析</h2>
      </div>
      <div id="contentarea"><div class="cell text-cell"><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">本实验为实验楼训练营课程 《Python 数据分析入门与进阶》的第七节，在该章节中我们将谈论数据分析过程中的时间序列分析。</p><h2 id="-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; padding-bottom: 0.3em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(234, 236, 239); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">时间序列简介</h2><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">时间序列分析是数据分析过程中，尤其是在金融数据分析过程中会经常遇到的。时间序列，就是以时间排序的一组随机变量，例如国家统计局每年或每月定期发布的 GDP 或 CPI 指数；24 小时内某一股票、基金、指数的数值变化等，都是时间序列。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">下图截取自雅虎财经网站，它就是纳斯达克指数某一天内数值变化（时间序列）的可视化结果。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);"><img src="resources/0085EAE728C8CFBACA0885833EE77B2A.png" alt="此处输入图片的描述" style="box-sizing: content-box; border: 0px none; vertical-align: middle; background-color: rgb(255, 255, 255); cursor: pointer;" width="1173" height="604"></p><h2 id="-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; padding-bottom: 0.3em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(234, 236, 239); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">时间序列处理</h2><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">当我们拿到一些时间序列原始数据时，可能会遇到下面的一些情况：</p><ol style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);"><li style="box-sizing: border-box;">某一段时间缺失，需要填充。</li><li style="box-sizing: border-box; margin-top: 0.25em;">时间序列错位，需要对齐。</li><li style="box-sizing: border-box; margin-top: 0.25em;"><p style="box-sizing: border-box; margin: 16px 0px;">数据表 a 和数据表 b 所采用的时间间隔不一致，需要重新采样。</p><p style="box-sizing: border-box; margin: 16px 0px;">……</p></li></ol><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">面对这些问题，我们就要通过一些处理手段来获得最终想要的数据。本节课程中，我们会继续用到 Pandas 提供的时间序列处理模块，下面先看一些基本的方法和操作。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">目前，Pandas 针对时间序列处理的类和方法如下：</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);"><img src="resources/F03A737DCE63782984C2F146CF697D1C.png" alt="此处输入图片的描述" style="box-sizing: content-box; border: 0px none; vertical-align: middle; background-color: rgb(255, 255, 255); cursor: pointer;" width="990" height="403"></p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">我们按照顺序来看一看这些方法可以做什么。</p><h3 id="timestamp-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">Timestamp 时间戳</h3><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">时间戳，即代表一个时间时刻。我们可以直接用&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">pd.Timestamp()</code>来创建时间戳。我们使用 ipython 演示，在重点中通过&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">anaconda/bin/ipython</code>&nbsp;打开。（小提示：使用 ipython 时，可以通过 Tab 键完成代码自动补全。）</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;"><span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[1]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">import</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pandas</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">as</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span>

<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[2]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.Timestamp</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"2017-1-1"</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[2]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Timestamp</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-01 00:00:00'</span>)

<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[3]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.Timestamp</span>(<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017</span>,<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">10</span>,<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">1</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[3]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Timestamp</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-10-01 00:00:00'</span>)

<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[4]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.Timestamp</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">"2017-1-1 12:59:59"</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[4]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Timestamp</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-01 12:59:59'</span>)
</code></pre><h3 id="-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">时间戳索引</h3><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">我们可以看到，单个时间戳为 Timestamp 数据，而时间戳以列表形式存在时，<span style="box-sizing: border-box; font-weight: 600;">Pandas 将强制转换为 DatetimeIndex</span>。此时，我们就不能再使用&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">pd.Timestamp()</code>来创建时间戳了，而是&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">pd.to_datetime()</code>来创建：</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">In [6]: pd.to_datetime(["2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>","2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-2</span>","2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-3</span>"])
Out[6]: DatetimeIndex(['2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span>', '2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-02</span>', '2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span>'], dtype='datetime64[ns]', freq=None)
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">注意输出部分和上面的区别。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">pd.to_datetime()</code>&nbsp;不仅仅可用来创建 DatetimeIndex，它还可以将对时间戳序列格式进行转换等操作。例如下面，常见的时间戳书写样式，都可以通过<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">pd.to_datetime()</code>&nbsp;规范化。</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">7</span>]: pd.to_datetime(['Jul 1, <span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-10-10</span>', None])
Out[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">7</span>]: DatetimeIndex(['<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-07-01</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-10-10</span>', 'NaT'], dtype='datetime64[ns]', freq=None)

In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">8</span>]: pd.to_datetime(['<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017/10</span>/1', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017</span>.1.31'])
Out[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">8</span>]: DatetimeIndex(['<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-10-01</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-31</span>'], dtype='datetime64[ns]', freq=None)

</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">对于欧洲时区普遍采用的书写样式，我们还可以通过&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">dayfirst=True</code>&nbsp;参数进行修正：</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[11]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.to_datetime</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'1-10-2017'</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[11]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Timestamp</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-10 00:00:00'</span>)

<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[12]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.to_datetime</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'1-10-2017'</span>, dayfirst=True)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[12]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Timestamp</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-10-01 00:00:00'</span>)

</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">当然，Pandas 所熟悉的 Seris 和 DataFrame 格式的字符串，也可以直接通过 to_datetime 转换：</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[15]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.to_datetime</span>(pd.Series([<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-1'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-2'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-3'</span>]))
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[15]</span>:
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span>   <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">1</span>   <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-02</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2</span>   <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-03</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">dtype</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">datetime64</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[ns]</span>

<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[16]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.to_datetime</span>([<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-1'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-2'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-3'</span>])
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[16]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">DatetimeIndex</span>([<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-01'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-02'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-03'</span>], dtype=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'datetime64[ns]'</span>, freq=None)

<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[17]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.to_datetime</span>(pd.DataFrame({<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'year'</span>: [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017</span>, <span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017</span>], <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'month'</span>: [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">1</span>, <span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2</span>], <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'day'</span>: [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">3</span>, <span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">4</span>], <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'hour'</span>: [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">5</span>, <span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">6</span>]}))
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[17]</span>:
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span>   <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-03</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">05</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">1</span>   <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-02-04</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">06</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">dtype</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">datetime64</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[ns]</span>
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">其中：</p><ul style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);"><li style="box-sizing: border-box;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">pd.to_datetime(Series/DataFrame)</code>返回的是<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">Series</code>。</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">pd.to_datetime(List)</code>返回的是<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">DatetimeIndex</code>。</li></ul><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">如果要转换如上所示的<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">DataFrame</code>，必须存在的列名有<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">year，month，day</code>。另外&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">hour, minute, second, millisecond, microsecond, nanosecond</code>可选。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">当我们在使用<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">pd.to_datetime()</code>&nbsp;转换数据时，很容易遇到无效数据。有一些任务对无效数据非常苛刻，所以报错让我们找到这些无效数据是不错的方法。当然，也有一些任务不在乎零星的无效数据，这时候就可以选择忽略。</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;"># 遇到无效数据报错
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[17]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.to_datetime</span>([<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-1'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'invalid'</span>], errors=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'raise'</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">ValueError</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Unknown</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">string</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">format</span>

# 忽略无效数据
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[18]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.to_datetime</span>([<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-1'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'invalid'</span>], errors=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'ignore'</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[18]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">array</span>([<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-1'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'invalid'</span>], dtype=object)

# 将无效数据显示为 <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">NaT</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[19]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.to_datetime</span>([<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-1'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'invalid'</span>], errors=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'coerce'</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[19]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">DatetimeIndex</span>([<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-01'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'NaT'</span>], dtype=<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'datetime64[ns]'</span>, freq=None)
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">接下来，我们看一看生成 DatetimeIndex 的另一个重要方法&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">pandas.date_range</code>。你应该可以从名字看出该方法的作用，我们可以通过指定一个规则，让&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">pandas.date_range</code>&nbsp;生成有序的 DatetimeIndex。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">pandas.date_range</code>&nbsp;方法带有的默认参数如下：</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">pandas.date_range(<span class="hljs-attribute" style="box-sizing: border-box; color: rgb(102, 217, 239);">start</span>=None, <span class="hljs-attribute" style="box-sizing: border-box; color: rgb(102, 217, 239);">end</span>=None, <span class="hljs-attribute" style="box-sizing: border-box; color: rgb(102, 217, 239);">periods</span>=None, <span class="hljs-attribute" style="box-sizing: border-box; color: rgb(102, 217, 239);">freq</span>=’D’, <span class="hljs-attribute" style="box-sizing: border-box; color: rgb(102, 217, 239);">tz</span>=None, <span class="hljs-attribute" style="box-sizing: border-box; color: rgb(102, 217, 239);">normalize</span>=<span class="hljs-literal" style="box-sizing: border-box; color: rgb(174, 129, 255);">False</span>,
<span class="hljs-attribute" style="box-sizing: border-box; color: rgb(102, 217, 239);">name</span>=None, <span class="hljs-attribute" style="box-sizing: border-box; color: rgb(102, 217, 239);">closed</span>=None, **kwargs)
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">常用参数的含义如下：</p><ul style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);"><li style="box-sizing: border-box;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">start=</code>&nbsp;：设置起始时间</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">end=</code>：设置截至时间</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">periods=</code>&nbsp;：设置时间区间，若&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">None</code>&nbsp;则需要设置单独设置起止和截至时间。</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">freq=</code>&nbsp;：设置间隔周期。</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">tz=</code>：设置时区。</li></ul><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">其中，<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">freq=</code>&nbsp;参数是非常关键的参数，我们可以设置的周期有：</p><ul style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);"><li style="box-sizing: border-box;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">freq='s'</code>: 秒</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">freq='min'</code>&nbsp;: 分钟</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">freq='H'</code>: 小时</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">freq='D'</code>: 天</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">freq='w'</code>: 周</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">freq='m'</code>: 月</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">freq='BM'</code>: 每个月最后一个工作日</li><li style="box-sizing: border-box; margin-top: 0.25em;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">freq='W'</code>：每周的星期日</li></ul><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs " style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(117, 113, 94);"># 从 2017-1-1 到 2017-1-2，以小时间隔</span>
In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">21</span>]: pd.date_range('<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017</span>-1-1','<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017</span>-1-2',freq='H')
Out[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">21</span>]:
DatetimeIndex(['<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 01:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 02:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 03:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 04:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 05:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 06:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 07:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 08:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 09:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 10:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 11:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 12:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 13:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 14:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 15:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 16:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 17:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 18:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 19:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 20:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 21:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 22:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 23:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-02</span> 00:00:00'],
              dtype='datetime64[ns]', freq='H')

<span class="hljs-meta" style="box-sizing: border-box; color: rgb(117, 113, 94);"># 从 2017-1-1 开始，以 1s 为间隔，向后推 10 次</span>
In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">23</span>]: pd.date_range('<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017</span>-1-1',periods=<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">10</span>,freq='s')
Out[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">23</span>]:
DatetimeIndex(['<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:01',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:02', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:03',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:04', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:05',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:06', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:07',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:08', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:09'],
              dtype='datetime64[ns]', freq='S')

<span class="hljs-meta" style="box-sizing: border-box; color: rgb(117, 113, 94);"># 从 2017-1-1 开始，以 1H20min 为间隔，向后推 10 次</span>
In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">24</span>]: pd.date_range('1/1/<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017</span>', periods=<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">10</span>, freq='1H20min')
Out[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">24</span>]:
DatetimeIndex(['<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 01:20:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 02:40:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 04:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 05:20:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 06:40:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 08:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 09:20:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 10:40:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 12:00:00'],
              dtype='datetime64[ns]', freq='80T')

</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">除了生成 DatetimeIndex，我们还可以对已有的 DatetimeIndex 进行操作。这些操作包括选择、切片等。类似于对 Series 的操作。</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">31</span>]: a = pd.date_range('<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017</span>-1-1',periods=<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">10</span>,freq='1D1H')

In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">32</span>]: a
Out[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">32</span>]:
DatetimeIndex(['<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-02</span> 01:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-03</span> 02:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-04</span> 03:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-05</span> 04:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-06</span> 05:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-07</span> 06:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-08</span> 07:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-09</span> 08:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-10</span> 09:00:00'],
              dtype='datetime64[ns]', freq='25H')

<span class="hljs-meta" style="box-sizing: border-box; color: rgb(117, 113, 94);"># 选取索引为 1 的时间戳</span>
In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">33</span>]: a[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">1</span>]
Out[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">33</span>]: Timestamp('<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-02</span> 01:00:00', freq='25H')

<span class="hljs-meta" style="box-sizing: border-box; color: rgb(117, 113, 94);"># 对索引从 0 到 4 的时间进行切片</span>
In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">34</span>]: a[:<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">5</span>]
Out[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">34</span>]:
DatetimeIndex(['<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-02</span> 01:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-03</span> 02:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-04</span> 03:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-05</span> 04:00:00'],
              dtype='datetime64[ns]', freq='25H')

</code></pre><h3 id="dateoffset-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">DateOffset 对象</h3><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">上面，我们使用&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">freq='1D1H'</code>&nbsp;参数，可以生成间隔 1 天+ 1 小时的时间戳索引。而在时序数据处理中，我们还常用一种叫做 DateOffset 对象，它可以对时间戳索引进行更加灵活的变化。DateOffset 对象主要作用有：</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">*<em style="box-sizing: border-box;">1. *</em>可以让时间索引增加或减少一定时间段。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">&nbsp;*<em style="box-sizing: border-box;">2. *</em>可以让时间索引乘以一个整数。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">&nbsp;*<em style="box-sizing: border-box;">3. *</em>可以让时间索引向前或向后移动到下一个或上一个特定的偏移日期。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">我们依旧针对上面的 a 索引进行处理：</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">1</span>]: import pandas as pd
In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2</span>]: from pandas import offsets

In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">3</span>]: a = pd.date_range('<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017</span>-1-1',periods=<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">10</span>,freq='1D1H')

In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">4</span>]: a
Out[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">4</span>]:
DatetimeIndex(['<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-01</span> 00:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-02</span> 01:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-03</span> 02:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-04</span> 03:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-05</span> 04:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-06</span> 05:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-07</span> 06:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-08</span> 07:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-09</span> 08:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-10</span> 09:00:00'],
              dtype='datetime64[ns]', freq='25H')

<span class="hljs-meta" style="box-sizing: border-box; color: rgb(117, 113, 94);"># 使用 DateOffset 对象让 a 依次增加 1 个月 + 2 天 + 3 小时</span>
In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">5</span>]: a + offsets.DateOffset(months=<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">1</span>, days=<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2</span>, hours=<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">3</span>)
Out[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">5</span>]:
DatetimeIndex(['<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-02-03</span> 03:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-02-04</span> 03:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-02-05</span> 03:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-02-06</span> 03:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-02-07</span> 03:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-02-08</span> 03:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-02-09</span> 03:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-02-10</span> 03:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-02-11</span> 03:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-02-12</span> 03:00:00'],
              dtype='datetime64[ns]', freq='D')

<span class="hljs-meta" style="box-sizing: border-box; color: rgb(117, 113, 94);"># 使用 DateOffset 对象让 a 向后偏移 2 周</span>

In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">6</span>]: a + <span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2</span>*offsets.Week()
Out[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">6</span>]:
DatetimeIndex(['<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-15</span> 00:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-16</span> 01:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-17</span> 02:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-18</span> 03:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-19</span> 04:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-20</span> 05:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-21</span> 06:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-22</span> 07:00:00',
               '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-23</span> 08:00:00', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01-24</span> 09:00:00'],
              dtype='datetime64[ns]', freq='25H')
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">更多DateOffset 对象列举如下：</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);"><img src="resources/581AB4443E8FE6AEAF9D6212AF181D5C.png" alt="此处输入图片的描述" style="box-sizing: content-box; border: 0px none; vertical-align: middle; background-color: rgb(255, 255, 255); cursor: pointer;" width="273" height="367"></p><h3 id="period-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">Period 时间间隔</h3><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">上面，我们对 Timestamp 时间戳和 DatetimeIndex 时间戳索引都有了较为充分的认识。除此之外 Pandas 中还存在 Period 时间间隔和 PeriodIndex 时间间隔索引对象。它们用来定义一定时间跨度。</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[1]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">import</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pandas</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">as</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span>

# <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">1</span> 年跨度
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[2]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017'</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[2]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'A-DEC'</span>)

# <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">1</span> 个月跨度
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[3]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1'</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[3]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'M'</span>)

# <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">1</span> 天跨度
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[4]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-1'</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[4]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-01'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'D'</span>)

# <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">1</span> 小时跨度
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[8]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-1 12'</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[8]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-01 12:00'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'H'</span>)

# <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">1</span> 分钟跨度
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[5]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-1 12:00'</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[5]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-01 12:00'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'T'</span>)

# <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">1</span> 秒跨度
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[6]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-1 12:05:00'</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[6]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-01 12:05:00'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'S'</span>)
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">同样我们可以通过&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">pandas.period_range()</code>&nbsp;方法来生成序列：</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">
In [<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">9</span>]: pd.period_range('<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017</span>-1','<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2018</span>-1',freq='M')
Out[<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">9</span>]:
PeriodIndex(['<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-01</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-02</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-03</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-04</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-05</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-06</span>',
             '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-07</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-08</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-09</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-10</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-11</span>', '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2017-12</span>',
             '<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">2018-01</span>'],
            dtype='period[M]', freq='M')

</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">Period，PeriodIndex</code>支持的操作和<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">Timestamp</code>以及<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">DatetimeIndex</code>&nbsp;非常相似，这里就不再重复赘述了。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">我们可以注意几个细节，<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">DatetimeIndex</code>&nbsp;的<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">dtype</code>&nbsp;类型为&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">datetime64[ns]</code>，而&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">PeriodIndex</code>&nbsp;的&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">dtype</code>&nbsp;类型为&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">period[M]</code>。另外，对于&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">Timestamp</code>和&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">Period</code>&nbsp;的区别，我们在单独拿出来看一下：</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;"><span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[15]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-1'</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[15]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Period</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-01'</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'D'</span>)

<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[16]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">pd</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.Timestamp</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-1-1'</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[16]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Timestamp</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'2017-01-01 00:00:00'</span>)
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">可以看到，上面代表是<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">2017-01-01</code>这一天，而下面仅代表&nbsp;<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 14.4px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; word-break: break-all;">2017-01-01 00:00:00</code>&nbsp;这一时刻。</p><h3 id="-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">时序数据检索</h3><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">DatetimeIndex 之所以称之为时间戳索引，当然是它的主要用途是作为 Series 或者 DataFrame 的索引。下面，我们就随机生成一些数据，然后看一看如何对时间序列数据进行操作。</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">
In [1]: import numpy as np

In [2]: import pandas as pd

# 生成时间索引
In [3]: i = pd.date_range('2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>', periods=20, freq='M')

# 生成随机数据并添加时间作为索引
In [4]: data = pd.Series(np.random.randn(len(i)), index = i)

# 查看数据
In [5]: data
Out[5]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.233579
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-02</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-28</span>    0.494723
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-2</span>.160592
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-04</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>    0.517173
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.984762
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-06</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>    0.655989
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-07</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.919411
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-08</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.114805
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-09</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.080374
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-10</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    1.360448
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-11</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.417094
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-12</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.555434
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    1.659271
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-02</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-28</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.514907
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.330979
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-04</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.707362
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.724524
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-06</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>    0.362518
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-07</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.157280
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-08</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.724665
Freq: M, dtype: float64

</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">上面就生成了一个以时间为索引的 Series 序列。其实，这就回到了对 Pandas 中 Series 和 DataFrame 类型数据操作的问题。下面演示一些操作：</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;"># 检索 2017 年的所有数据
In [12]: data['2017']
Out[12]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.233579
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-02</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-28</span>    0.494723
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-2</span>.160592
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-04</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>    0.517173
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.984762
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-06</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>    0.655989
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-07</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.919411
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-08</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.114805
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-09</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.080374
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-10</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    1.360448
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-11</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.417094
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-12</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.555434
Freq: M, dtype: float64

# 检索 2017 年 7 月到 2018 年 3 月之间的所有数据
In [13]: data['2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-07</span>':'2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span>']
Out[13]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-07</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.919411
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-08</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.114805
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-09</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.080374
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-10</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    1.360448
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-11</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.417094
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-12</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.555434
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    1.659271
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-02</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-28</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.514907
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.330979
Freq: M, dtype: float64

# 使用 loc 方法检索 2017 年 1 月的所有数据
In [14]: data.loc['2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span>']
Out[14]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.233579
Freq: M, dtype: float64

# 使用 truncate 方法检索 2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-3</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span> 到 2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-4</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-2</span> 期间的数据
In [17]: data.truncate(before='2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-3</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>',after='2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-4</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-2</span>')
Out[17]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-2</span>.160592
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-04</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>    0.517173
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.984762
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-06</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>    0.655989
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-07</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.919411
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-08</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.114805
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-09</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.080374
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-10</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    1.360448
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-11</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.417094
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-12</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.555434
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    1.659271
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-02</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-28</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.514907
2018<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.330979
Freq: M, dtype: float64

</code></pre><h3 id="-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">时序数据偏移</h3><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">对于时序数据的处理，肯定不只是查询和切片这么简单。我们这里可能会用到 Shifting 方法，将时间索引进行整体偏移。</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">
In [1]: import numpy as np

In [2]: import pandas as pd

# 生成时间索引
In [3]: i = pd.date_range('2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>', periods=5, freq='M')

# 生成随机数据并添加时间作为索引
In [4]: data = pd.Series(np.random.randn(len(i)), index = i)

# 查看数据
In [5]: data
Out[5]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.830480
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-02</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-28</span>    0.348324
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.622078
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-04</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.192675
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.441947
Freq: M, dtype: float64

# 将索引向前位移 3 个单位，也就是数据向后位移 3 个单位，缺失数据 Pandas 会用 NaN 自动填充
In [8]: data.shift(3)
Out[8]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>         NaN
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-02</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-28</span>         NaN
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>         NaN
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-04</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>    0.830480
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>    0.348324
Freq: M, dtype: float64

# 将索引向后位移 3 个单位，也就是数据向前位移 3 个单位
In [9]: data.shift(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-3</span>)
Out[9]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.192675
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-02</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-28</span>    0.441947
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>         NaN
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-04</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-30</span>         NaN
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-31</span>         NaN
Freq: M, dtype: float64

# 将索引的时间向后移动 3 天
In [10]: data.shift(3,freq='D')
Out[10]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-02</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span>    0.830480
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span>    0.348324
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-04</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.622078
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.192675
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-06</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span>    0.441947
dtype: float64

</code></pre><h3 id="-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">时序数据重采样</h3><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">除了 Shifting 方法，重采样 Resample 也会经常用到。Resample 可以提升或降低一个时间索引序列的频率，大有用处。例如：当时间序列数据量非常大时，我们可以通过低频率采样的方法得到规模较小到时间覆盖依然较为全面的新数据集。另外，对于多个不同频率的数据集需要数据对齐时，重采样可以十分重要的手段。</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs python" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;">In [1]: import pandas as pd

In [2]: import numpy as np

In [3]: i = pd.date_range('2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>', periods=20, freq='D')

In [4]: data = pd.Series(np.random.randn(len(i)), index = i)

In [5]: data
Out[5]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span>    0.384984
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-02</span>    0.341555
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.100246
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-04</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.660066
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span>    0.007575
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-06</span>    2.402068
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-07</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.365657
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-08</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.853025
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-09</span>    0.588139
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-10</span>    0.047322
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-11</span>    0.213384
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-12</span>    1.056038
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-13</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.588518
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-14</span>    0.076655
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-15</span>    1.467056
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-16</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.877541
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-17</span>    0.003218
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-18</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.811914
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-19</span>    0.143571
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-20</span>    0.837088
Freq: D, dtype: float64

# 按照 2 天进行降采样，并对 2 天对应的数据求和作为新数据
In [6]: data.resample('2D').sum()
Out[6]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span>    0.726539
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.760312
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span>    2.409643
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-07</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.218682
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-09</span>    0.635461
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-11</span>    1.269422
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-13</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.511864
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-15</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.410485
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-17</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.808696
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-19</span>    0.980658
Freq: 2D, dtype: float64

# 按照 2 天进行降采样，并对 2 天对应的数据求平均值作为新数据
In [7]: data.resample('2D').mean()
Out[7]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span>    0.363269
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.380156
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span>    1.204821
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-07</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.609341
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-09</span>    0.317730
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-11</span>    0.634711
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-13</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.755932
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-15</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.205243
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-17</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.404348
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-19</span>    0.490329
Freq: 2D, dtype: float64

# 按照 2 天进行降采样，并选取对应 2 天的最大值作为新数据
In [9]: data.resample('2D').max()
Out[9]:
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span>    0.384984
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.100246
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span>    2.402068
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-07</span>   <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.365657
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-09</span>    0.588139
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-11</span>    1.056038
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-13</span>    0.076655
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-15</span>    1.467056
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-17</span>    0.003218
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-19</span>    0.837088
Freq: 2D, dtype: float64

# 按照 2 天进行降采样，并将对应 2 天数据的原值、最大值、最小值、以及临近值列出
In [10]: data.resample('2D').ohlc()
Out[10]:
                open      high       low     close
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span>  0.384984  0.384984  0.341555  0.341555
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-03</span> <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.100246 <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.100246 <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.660066 <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.660066
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-05</span>  0.007575  2.402068  0.007575  2.402068
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-07</span> <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.365657 <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.365657 <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.853025 <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.853025
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-09</span>  0.588139  0.588139  0.047322  0.047322
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-11</span>  0.213384  1.056038  0.213384  1.056038
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-13</span> <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.588518  0.076655 <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.588518  0.076655
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-15</span>  1.467056  1.467056 <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.877541 <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-1</span>.877541
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-17</span>  0.003218  0.003218 <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.811914 <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-0</span>.811914
2017<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-01</span><span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">-19</span>  0.143571  0.837088  0.143571  0.837088

</code></pre><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">采样操作起来非常简单，只是需要注意采样后对新数据不同的处理方法。上面介绍的是降频采样。我们也可以升频采样。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">继续沿用上面 data 的示例数据</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; word-break: break-all; overflow-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><code class="hljs " style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(248, 248, 242); background-color: rgb(35, 36, 31); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; word-break: break-all; display: block; overflow-x: auto;"># 时间频率从天提升到小时，并使用相同的数据对新增加行填充
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[11]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">data</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.resample</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'H'</span>)<span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.ffill</span>()
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[11]</span>:
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.384984</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">01</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.384984</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">02</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.384984</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">03</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.384984</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">04</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.384984</span>

                         ...

<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-19</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">21</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.143571</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-19</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">22</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.143571</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-19</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">23</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.143571</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-20</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.837088</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Freq</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">H</span>, <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Length</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">457</span>, <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">dtype</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">float64</span>


# 时间频率从天提升到小时，不对新增加行填充
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[12]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">data</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.resample</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'H'</span>)<span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.asfreq</span>()
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[12]</span>:
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.384984</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">01</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>         <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">NaN</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">02</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>         <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">NaN</span>

                         ...

<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-19</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">23</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>         <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">NaN</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-20</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.837088</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Freq</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">H</span>, <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Length</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">457</span>, <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">dtype</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">float64</span>

# 时间频率从天提升到小时，只对新增加前 <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">3</span> 行填充
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">In</span> <span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[13]</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">data</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.resample</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 116);">'H'</span>)<span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.ffill</span>(limit=<span class="hljs-number" style="box-sizing: border-box; color: rgb(174, 129, 255);">3</span>)
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Out</span><span class="hljs-selector-attr" style="box-sizing: border-box; color: rgb(230, 219, 116);">[13]</span>:
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.384984</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">01</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.384984</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">02</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.384984</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">03</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.384984</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">04</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>         <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">NaN</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-01</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">05</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>         <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">NaN</span>

                         ...

<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-19</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">21</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>         <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">NaN</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-19</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">22</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>         <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">NaN</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-19</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">23</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>         <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">NaN</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">2017-01-20</span> <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span><span class="hljs-selector-pseudo" style="box-sizing: border-box; color: rgb(230, 219, 116);">:00</span>    <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">0</span><span class="hljs-selector-class" style="box-sizing: border-box; color: rgb(166, 226, 46);">.837088</span>
<span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Freq</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">H</span>, <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">Length</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">457</span>, <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">dtype</span>: <span class="hljs-selector-tag" style="box-sizing: border-box; color: rgb(249, 38, 114);">float64</span>

</code></pre><h2 id="-" style="box-sizing: border-box; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.25; color: rgb(36, 41, 46); margin-top: 24px; margin-bottom: 16px; padding-bottom: 0.3em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(234, 236, 239); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">实验总结</h2><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">本章节学习了 Pandas 针对时间序列分析处理的一些方法。我们用到的类和方法虽然不多，但使用起来非常灵活多变。很多时候，我们需要的结果存在多种不同的实现途径，所以这些方法看起比较杂乱。而学习时，一定要对照本章一开始给出的图表进行，就能达到事半功倍的效果。</p><p style="box-sizing: border-box; margin: 0px 0px 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(249, 249, 249);">由于 Pandas 实验序列处理函数参数较为复杂，建议阅读一遍&nbsp;<a href="https://pandas.pydata.org/pandas-docs/stable/timeseries.html" target="_blank" style="box-sizing: border-box; background-color: transparent; color: rgb(3, 102, 214); text-decoration: none;">官方文档</a>。</p></div></div>
      <script>document.body.onkeyup = function(e) {
if (e.keyCode === 39) window.location.href = '十、分类预测挑战（挑战）.html';
if (e.keyCode === 37) window.location.href = '十二、时间序列分析挑战（挑战）.html';
}</script>
    </body>
    </html>
  